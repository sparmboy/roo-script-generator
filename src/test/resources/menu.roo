##########################
# Project Initialisation #
##########################

# Create the project
project --topLevelPackage com.coup.menuorder.schema

# Setup persistence
jpa setup --provider HIBERNATE --database HYPERSONIC_PERSISTENT

#######################
# Create the entities #
#######################

# Dish
entity jpa --class com.coup.menuorder.schema.Dish --activeRecord false --testAutomatically --extends MenuItem
repository jpa --interface com.coup.menuorder.schema.DishRepository --entity com.coup.menuorder.schema.Dish

# NutritionalInformation
entity jpa --class com.coup.menuorder.schema.NutritionalInformation --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.NutritionalInformationRepository --entity com.coup.menuorder.schema.NutritionalInformation

# Menu
entity jpa --class com.coup.menuorder.schema.Menu --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.MenuRepository --entity com.coup.menuorder.schema.Menu

# Venue
entity jpa --class com.coup.menuorder.schema.Venue --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.VenueRepository --entity com.coup.menuorder.schema.Venue

# MenuItem
entity jpa --class com.coup.menuorder.schema.MenuItem --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.MenuItemRepository --entity com.coup.menuorder.schema.MenuItem

# Drink
entity jpa --class com.coup.menuorder.schema.Drink --activeRecord false --testAutomatically --extends MenuItem
repository jpa --interface com.coup.menuorder.schema.DrinkRepository --entity com.coup.menuorder.schema.Drink

# OrderType
entity jpa --class com.coup.menuorder.schema.OrderType --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.OrderTypeRepository --entity com.coup.menuorder.schema.OrderType

# OrderLine
entity jpa --class com.coup.menuorder.schema.OrderLine --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.OrderLineRepository --entity com.coup.menuorder.schema.OrderLine

# Customer
entity jpa --class com.coup.menuorder.schema.Customer --activeRecord false --testAutomatically
repository jpa --interface com.coup.menuorder.schema.CustomerRepository --entity com.coup.menuorder.schema.Customer

########################
# Entity Relationships #
########################
field string --fieldName firstname --class com.coup.menuorder.schema.Customer 
field string --fieldName surname --class com.coup.menuorder.schema.Customer 
field string --fieldName address --class com.coup.menuorder.schema.Customer 
field string --fieldName username --class com.coup.menuorder.schema.Customer 
field string --fieldName password --class com.coup.menuorder.schema.Customer 
field string --fieldName paymentMethods --class com.coup.menuorder.schema.Customer 
field string --fieldName email --class com.coup.menuorder.schema.Customer 
field string --fieldName facebook --class com.coup.menuorder.schema.Customer 
field string --fieldName twitter --class com.coup.menuorder.schema.Customer 

# Customer to string [One to Many]
field set --fieldName orders --type com.coup.menuorder.schema.string --class com.coup.menuorder.schema.Customer --cardinality ONE_TO_MANY
field string --fieldName currentGPSLocation --class com.coup.menuorder.schema.Customer 
field string --fieldName title --class com.coup.menuorder.schema.Menu 
field string --fieldName description --class com.coup.menuorder.schema.Menu 

# Menu to string [One to Many]
field set --fieldName menuItems --type com.coup.menuorder.schema.string --class com.coup.menuorder.schema.Menu --cardinality ONE_TO_MANY
field string --fieldName venue --class com.coup.menuorder.schema.Menu --notNull 
field string --fieldName item --class com.coup.menuorder.schema.OrderLine --notNull 
field string --fieldName additionalInformation --class com.coup.menuorder.schema.OrderLine 
field string --fieldName orderType --class com.coup.menuorder.schema.OrderLine --notNull 
field string --fieldName menu --class com.coup.menuorder.schema.MenuItem --notNull 
field string --fieldName title --class com.coup.menuorder.schema.MenuItem 
field string --fieldName description --class com.coup.menuorder.schema.MenuItem 
field number --type double --fieldName price --class com.coup.menuorder.schema.MenuItem 
field number --type double --fieldName alchohol --class com.coup.menuorder.schema.Drink 
field number --type double --fieldName year1 --class com.coup.menuorder.schema.Drink 
field string --fieldName country --class com.coup.menuorder.schema.Drink 
field string --fieldName region --class com.coup.menuorder.schema.Drink 
field string --fieldName size1 --class com.coup.menuorder.schema.Drink 
field string --fieldName title --class com.coup.menuorder.schema.Venue 
field string --fieldName description --class com.coup.menuorder.schema.Venue 
field string --fieldName address --class com.coup.menuorder.schema.Venue 
field string --fieldName gpsCoords --class com.coup.menuorder.schema.Venue 
field string --fieldName phone --class com.coup.menuorder.schema.Venue 
field string --fieldName email --class com.coup.menuorder.schema.Venue 
field string --fieldName twitter --class com.coup.menuorder.schema.Venue 
field string --fieldName facebook --class com.coup.menuorder.schema.Venue 
field string --fieldName url --class com.coup.menuorder.schema.Venue 

# Venue to string [One to Many]
field set --fieldName menus --type com.coup.menuorder.schema.string --class com.coup.menuorder.schema.Venue --cardinality ONE_TO_MANY

# OrderType to string [One to Many]
field set --fieldName lines --type com.coup.menuorder.schema.string --class com.coup.menuorder.schema.OrderType --cardinality ONE_TO_MANY
field string --fieldName customer --class com.coup.menuorder.schema.OrderType --notNull 
field date --type java.util.Calendar --fieldName placementDate --class com.coup.menuorder.schema.OrderType --notNull 
field date --type java.util.Calendar --fieldName estimatedDate --class com.coup.menuorder.schema.OrderType 
field boolean --fieldName active --class com.coup.menuorder.schema.OrderType --notNull 
field boolean --fieldName collected --class com.coup.menuorder.schema.OrderType --notNull 
field number --type int --fieldName stock --class com.coup.menuorder.schema.Dish 
field string --fieldName cuisine --class com.coup.menuorder.schema.Dish 
field boolean --fieldName containsNuts --class com.coup.menuorder.schema.Dish 
field boolean --fieldName containsMilk --class com.coup.menuorder.schema.Dish 
field boolean --fieldName vegan --class com.coup.menuorder.schema.Dish 
field boolean --fieldName vegitarian --class com.coup.menuorder.schema.Dish 
field string --fieldName spiceRating --class com.coup.menuorder.schema.Dish 

# Dish to string [One to Many]
field set --fieldName nutritionalInformation --type com.coup.menuorder.schema.string --class com.coup.menuorder.schema.Dish --cardinality ONE_TO_MANY
field string --fieldName type --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName energyKJ --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName energykcal --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName protein --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName carbohydrate --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName fat --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName mono_unsaturates --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName polyunsaturates --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName fibres --class com.coup.menuorder.schema.NutritionalInformation 
field number --type double --fieldName salt --class com.coup.menuorder.schema.NutritionalInformation 
field string --fieldName dish --class com.coup.menuorder.schema.NutritionalInformation --notNull 

########################
# Web Tier	       #
########################
json all
web mvc json setup
web mvc json all --package com.coup.menuorder.schema

########################
# Add Selenium Tests   #
########################
selenium test --controller com.coup.menuorder.schema.DishController
selenium test --controller com.coup.menuorder.schema.NutritionalInformationController
selenium test --controller com.coup.menuorder.schema.MenuController
selenium test --controller com.coup.menuorder.schema.VenueController
selenium test --controller com.coup.menuorder.schema.MenuItemController
selenium test --controller com.coup.menuorder.schema.DrinkController
selenium test --controller com.coup.menuorder.schema.OrderTypeController
selenium test --controller com.coup.menuorder.schema.OrderLineController
selenium test --controller com.coup.menuorder.schema.CustomerController
